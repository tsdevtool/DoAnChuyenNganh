<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<head>
    <meta charset="UTF-8">
    <title>Chi tiết bác sĩ</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f9f9f9;
        }

        .doctor-schedule-container {
            margin: 50px auto;
            max-width: 900px;
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            padding: 20px;
        }

        .doctor-details {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
        }

        .doctor-avatar {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid #007bff;
        }

        .doctor-info {
            flex: 1;
        }

        .doctor-info h2 {
            font-size: 24px;
            color: #333;
            margin-bottom: 10px;
        }

        .doctor-info p {
            margin: 5px 0;
            color: #555;
        }

        .doctor-info .experience {
            font-weight: bold;
            color: #28a745;
        }

        .day-tabs {
            display: flex;
            justify-content: flex-start;
            align-items: center;
            overflow-x: auto;
            white-space: nowrap;
            margin-bottom: 15px;
            padding: 10px 0;
            scrollbar-width: thin; /* Hiển thị thanh cuộn cho Firefox */
            scrollbar-color: #007bff #f1f1f1;
        }

        .day-tabs::-webkit-scrollbar {
            height: 6px; /* Độ dày của thanh cuộn */
        }

        .day-tabs::-webkit-scrollbar-thumb {
            background-color: #007bff; /* Màu của thanh kéo */
            border-radius: 10px; /* Bo tròn thanh kéo */
        }

        .day-tabs::-webkit-scrollbar-track {
            background-color: #f1f1f1; /* Màu nền của thanh cuộn */
        }

        .day-button {
            padding: 10px 15px;
            background-color: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            flex: 0 0 auto; /* Để nút không chiếm hết chiều ngang */
            margin-right: 10px;
            font-size: 14px;
            transition: background-color 0.3s, color 0.3s;
        }

        .day-button.active {
            background-color: #007bff;
            color: #fff;
            font-weight: bold;
        }

        .day-button:hover {
            background-color: #007bff;
            color: #fff;
        }

        .slot-container {
            display: none;
        }

        .slot-container.active {
            display: block;
        }

        .slot-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
    gap: 10px;
    max-height: 250px; /* Giới hạn chiều cao */
    overflow-y: auto; /* Bật thanh cuộn dọc */
    padding-right: 5px; /* Khoảng cách để thấy thanh cuộn rõ hơn */
        }

        .slot-grid::-webkit-scrollbar {
            width: 6px; /* Độ rộng của thanh cuộn */
        }

        .slot-grid::-webkit-scrollbar-thumb {
            background-color: #007bff; /* Màu thanh kéo */
            border-radius: 10px; /* Bo tròn */
        }

        .slot-grid::-webkit-scrollbar-track {
            background-color: #f1f1f1; /* Màu nền */
        }

        .time-slot-button {
            padding: 10px;
            background-color: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            font-size: 14px;
            transition: background-color 0.3s, transform 0.2s;
        }

        .time-slot-button:hover {
            background-color: #007bff;
            color: #fff;
            transform: translateY(-3px);
        }
        .d-flex {
          gap: 20px; /* Khoảng cách giữa phần text và nút */
         }

         .btn-primary {
             background-color: #007bff;
             border: none;
             transition: all 0.3s ease;
         }

         .btn-primary:hover {
             background-color: #0056b3;
             transform: translateY(-2px);
         }
         .text-center{
           text-align: center;z
        }
    </style>
</head>
<body>
<section layout:fragment="content" class="container mtop">
<div class="container">
    <!-- Khung gộp thông tin bác sĩ và lịch làm việc -->
    <div class="doctor-schedule-container">
        <!-- Thông tin bác sĩ -->
        <div class="doctor-details">
            <img th:src="${doctor.avatarUrl}" class="doctor-avatar" alt="Avatar bác sĩ">
            <div class="doctor-info">
                <h2 th:text="${doctor.userName}">Tên bác sĩ</h2>
                <p><strong>Chuyên khoa:</strong> <span th:text="${doctor.departmentName}">Khoa</span></p>
                <p><strong>Chức vụ:</strong> <span th:text="${doctor.positionName}">Chức vụ</span></p>
                <p><strong>Thông tin:</strong> <span th:text="${doctor.information}">Thông tin</span></p>
                <p><strong>Kinh nghiệm:</strong> <span th:text="${doctor.experience + ' năm'}">Kinh nghiệm</span></p>
            </div>
        </div>

        <!-- Lịch làm việc --><div class="schedule-container">
        <h4>Đặt khám nhanh</h4>
        <!-- Tabs cho các ngày làm việc -->
        <div class="day-tabs mt-3">
            <button th:each="schedule, iter : ${doctor.workSchedules}"
                    th:text="${schedule.schedule}"
                    th:data-index="${iter.index}"
                    class="day-button"
                    th:classappend="${iter.index == 0} ? 'active'">
            </button>
        </div>
        <!-- Danh sách khung giờ theo từng ngày -->
        <div th:each="schedule, iter : ${doctor.workSchedules}"
             th:data-index="${iter.index}"
             class="slot-container"
             th:classappend="${iter.index == 0} ? 'active'">
            <div class="slot-grid">
                <button th:each="timeSlot : ${schedule.timeSlots}"
                        th:text="${timeSlot}"
                        class="time-slot-button">
                </button>
            </div>
        </div>
    </div>
        <div class="text-center mt-4">
            <button class="btn btn-primary btn-lg" style="border-radius: 8px; font-weight: bold;">
                ĐẶT KHÁM NGAY
            </button>
        </div>
    </div>
</div>
<script>
    document.addEventListener("DOMContentLoaded", () => {
      const dayButtons = document.querySelectorAll(".day-button");
      const slotContainers = document.querySelectorAll(".slot-container");

      dayButtons.forEach((button, index) => {
          button.addEventListener("click", () => {
              // Reset trạng thái active
              dayButtons.forEach(btn => btn.classList.remove("active"));
              slotContainers.forEach(container => container.classList.remove("active"));
              // Thêm trạng thái active
              button.classList.add("active");
              slotContainers[index].classList.add("active");
              // Cuộn đến vị trí của nút được chọn
              button.scrollIntoView({ behavior: "smooth", inline: "center" });
          });
      });
  });
</script>
</section>
</body>
</html>
